#N canvas 2086 325 1661 668 12;
#X text 853 445 updated for Pd version 0.37;
#X msg 553 -126 bang;
#X obj 678 237 / 1000;
#X floatatom 678 287 8 0 0 0 - - -, f 8;
#X obj 678 312 / 60;
#X floatatom 678 337 8 0 0 0 - - -, f 8;
#X text 737 337 min;
#X text 737 287 sec;
#X obj 553 171 s note;
#X floatatom 192 -1 5 0 0 0 - - -, f 5;
#X floatatom 260 -27 5 0 0 0 - - -, f 5;
#X floatatom 312 -3 5 0 0 0 - - -, f 5;
#X floatatom 56 -2 5 0 0 0 - - -, f 5;
#X obj 148 -26 / 2;
#X floatatom 148 -1 5 0 0 0 - - -, f 5;
#X obj 47 162 r sample-size;
#X obj 47 209 / 30;
#X floatatom 47 260 10 0 0 0 - - -, f 10;
#X obj 47 317 *;
#X obj 65 111 random 30;
#X obj 65 286 t b f;
#X floatatom 77 317 5 0 0 0 - - -, f 5;
#X floatatom 65 137 5 0 0 0 - - -, f 5;
#X msg 65 81 bang;
#X msg 553 118 set \$1 \$2 \$3 \$4 \$5 \$6 \$7;
#X msg 553 145 60 100 5402 11 145796 1181 237;
#X obj 553 70 pack 60 f f 1 f f f;
#X obj 47 374 s onset;
#X obj 639 -24 r onset;
#X obj 312 21 s fadeout;
#X obj 683 21 r fadeout;
#X obj 260 21 s hold;
#X obj 192 21 s fadein;
#X obj 661 -2 r fadein;
#X obj 148 21 s max;
#N canvas 2081 414 688 519 sampler 0;
#X obj 119 -94 unpack 0 0 0 0 0 0 0;
#X obj 63 -66 poly 8 1;
#X obj 154 80 route 1 2 3 4 5 6 7 8;
#X obj 63 -41 swap;
#X obj 63 6 route 0;
#X obj 63 -17 pack;
#X obj 105 31 unpack;
#X obj 57 99 sampvoice2;
#X obj 63 31 pack;
#X obj 119 -119 r onoff;
#X obj 336 -31 f;
#X obj 372 -31 + 1;
#X obj 336 -5 mod 1e+06;
#X obj 154 55 pack 0 0 0 0 0 0 0;
#X obj 418 -116 r note;
#X obj 418 -90 unpack 0 0 0 0 0 0 0;
#X obj 395 -63 t b f;
#X obj 436 47 pack 0 0 0 0 0 0 0;
#X obj 389 95 s onoff;
#X obj 370 40 pipe;
#X obj 370 63 pack;
#X obj 57 122 sampvoice2;
#X obj 57 146 sampvoice2;
#X obj 57 170 sampvoice2;
#X obj 57 193 sampvoice2;
#X obj 57 217 sampvoice2;
#X obj 57 240 sampvoice2;
#X obj 57 264 sampvoice2;
#X obj 58 307 outlet~;
#X connect 0 0 1 0;
#X connect 0 1 13 1;
#X connect 0 1 1 1;
#X connect 0 2 13 2;
#X connect 0 3 13 3;
#X connect 0 4 13 4;
#X connect 0 5 13 5;
#X connect 0 6 13 6;
#X connect 1 0 3 0;
#X connect 1 2 3 1;
#X connect 2 0 7 1;
#X connect 2 1 21 1;
#X connect 2 2 22 1;
#X connect 2 3 23 1;
#X connect 2 4 24 1;
#X connect 2 5 25 1;
#X connect 2 6 26 1;
#X connect 2 7 27 1;
#X connect 3 0 5 0;
#X connect 3 1 5 1;
#X connect 4 0 8 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 6 1 13 0;
#X connect 7 0 21 0;
#X connect 8 0 2 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 10 1;
#X connect 12 0 19 0;
#X connect 12 0 17 0;
#X connect 13 0 2 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 17 1;
#X connect 15 2 19 1;
#X connect 15 3 17 3;
#X connect 15 4 17 4;
#X connect 15 5 17 5;
#X connect 15 6 17 6;
#X connect 16 0 10 0;
#X connect 16 1 17 2;
#X connect 17 0 18 0;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X restore 553 337 pd sampler;
#X obj 678 191 r sample-size;
#X floatatom 678 213 10 0 0 0 - - -, f 10;
#X floatatom 47 188 10 0 0 0 - - -, f 10;
#X text 629 -153 reception des datas (envellope+onset+n° du sample
à jouer) et construction du message envoyé à l'objet [pd sampler].
;
#X text 787 -63 ARGUMENTS DU MESSAGE;
#X text 786 -44 1 . pitch;
#X text 786 -20 2 . amplitude . max;
#X text 786 4 3 . duration/longueur . hold;
#X text 784 28 4 . sample number . pays [BackUp];
#X text 784 55 5 . sample onset .;
#X text 784 81 6 . rise time . fadein;
#X text 785 105 7 . decay time . fadeout;
#X text 800 144 message;
#N canvas 2476 238 450 693 aide 0;
#X text 13 4 POLY SAMPLER \, VERSION 2 FOR SEPARATE NOTE-ON/OFF MESSAGES
;
#X msg 103 528 \; onoff 1 90 60 1 0 0 100;
#X msg 323 528 \; onoff 1 0;
#X msg 104 570 \; onoff 2 90 48 1 0 0 100;
#X msg 324 570 \; onoff 2 0;
#X text 14 35 Here is a variation on the polyphonic sampler \, which
can take separate messages to start and stop notes (so that you can
attach it to a MIDI keyboard \, for example.) "Note" messages act as
before \, but in an intermediate step they are split onto note-on and
note-off messages \, sent to "onoff". You can alternatively send messages
straight to onoff if you don't know the duration in advance.;
#X text 12 150 Messages to "onoff" require a tag \, which is a number
shared between the note-on and note-off message so that we can track
down the voice to turn it off. If you're using MIDI input \, you can
just re-use the pitch as a tag.;
#X text 102 508 separate messages for not on and off:;
#X text 101 608 single messages to do both as before:;
#X text 10 221 Messages to "onoff" whose amplitude is zero are note-off
messages (the other parameters of note-off messages are ignored). The
"sampvoice2" abstraction is a modification of "sampvoice" which looks
at the amplitude field to decide whether to begin or end a note.;
#X text 10 301 To convert "note" messages to pairs of "onoff" messages
\, first a counter generates a tag. The the "pipe" object delays a
copy of the tag \, which the following "pack" object converts into
a note-off message (a pair of numbers \, the tag and a zero.);
#X text 9 382 Under "r onoff" \, the poly object allocates a voice
number \, putting it out paired with velocity. After swapping the two
and packing them into a single message \, the amplitude is checked
against zero by the "route 0" object \; if zero \, the "pack" confects
a 2-argument message (voice number and zero). Otherwise \, the "unpack"
retrieves the nonzero amplitude for a note-on message \, to which we
add all the other parameters and route to the appropriate voice.;
#X msg 102 633 \; onoff 1 100 60 1 0 0 100;
#X restore 782 339 pd aide;
#X text 752 213 ms;
#X floatatom 47 340 10 0 0 0 - - -, f 10;
#X text 81 210 nombre de d'echantillons . jour par pays;
#X text 122 189 taille du sample en ms;
#X text 121 259 taille d'un échantillon en ms;
#X text 121 340 sample onset . emplacement de la tête de lecture;
#X text 116 287 calcule de la position de la tete de lecture;
#X text 117 317 emplacement de la tête de lecture;
#X obj 47 235 i;
#X obj 678 262 i;
#X text 784 239 Taille du sample utile pour définire la taille des
tables des objets [pd sample] et [pd recorder];
#X text 111 364 envoi du sample onset a l'assemblage des arguments
qui constiturons le message a destination du sampler;
#X obj 574 -103 r max;
#X obj 596 -79 r hold;
#X obj 65 53 r audio-id;
#X obj 56 -151 r audio-pays;
#X obj 148 -151 r audio-level;
#X obj 192 -131 r audio-fadein;
#X obj 260 -111 r audio-hold;
#X obj 312 -91 r audio-fadeout;
#X text 72 -106 RECEPTION CALIBRAGE DATA;
#X obj 56 22 s pays;
#X obj 618 -53 r pays;
#X obj 553 -152 r audio-id;
#X obj 526 373 outlet~;
#N canvas 1984 102 1337 697 recorder 0;
#X obj 174 304 adc~ 1;
#X obj 174 332 hip~ 5;
#X obj 243 362 line~;
#X obj 174 361 *~;
#X msg 243 334 1;
#X obj 302 299 del 3990;
#X msg 279 334 0 10;
#X obj 174 412 tabwrite~ sample1;
#X msg 26 247 set \$1 \, bang;
#X msg 348 270 stop;
#X msg 302 270 bang;
#X obj 220 180 route record stop reload browse;
#X obj 389 440 loadbang;
#X obj 514 243 openpanel;
#X msg 514 215 bang;
#X text 556 214 <-- browse for samples;
#X text 482 339 v-- re-read original samples;
#X msg 514 270 read \$1 sample1;
#X obj 514 297 soundfiler;
#X msg 220 41 record 1;
#X msg 220 97 stop;
#X msg 220 69 record 2;
#X msg 220 124 reload;
#X msg 220 152 browse;
#X text 218 19 record \, etc.;
#X obj 26 218 makefilename sample%d;
#X obj 322 583 soundfiler;
#X obj 464 616 s sample-size;
#X obj 466 583 f;
#X obj 441 505 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 399 504 sel 1;
#X obj 399 479 r audio-pays;
#X obj 209 516 inlet;
#X obj 410 583 / 44.1;
#X msg 322 544 read -resize -maxsize 7.94e+06 3.wav sample1;
#X floatatom 310 623 15 0 0 0 - - -, f 15;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 7 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 8 0 7 0;
#X connect 9 0 5 0;
#X connect 10 0 5 0;
#X connect 11 0 10 0;
#X connect 11 0 4 0;
#X connect 11 0 25 0;
#X connect 11 1 6 0;
#X connect 11 1 9 0;
#X connect 11 3 14 0;
#X connect 12 0 34 0;
#X connect 13 0 17 0;
#X connect 14 0 13 0;
#X connect 17 0 18 0;
#X connect 19 0 11 0;
#X connect 20 0 11 0;
#X connect 21 0 11 0;
#X connect 22 0 11 0;
#X connect 23 0 11 0;
#X connect 25 0 8 0;
#X connect 26 0 33 0;
#X connect 26 0 35 0;
#X connect 28 0 27 0;
#X connect 29 0 28 0;
#X connect 30 0 29 0;
#X connect 31 0 30 0;
#X connect 32 0 34 0;
#X connect 33 0 28 0;
#X connect 34 0 26 0;
#X restore 681 406 pd recorder;
#X obj 683 387 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 586 373 outlet~;
#X obj 436 -84 loadbang;
#X msg 212 -64 3000;
#X msg 148 -64 200;
#X obj 260 -3 * 2;
#X connect 1 0 25 0;
#X connect 1 0 26 0;
#X connect 2 0 59 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 9 0 32 0;
#X connect 10 0 81 0;
#X connect 11 0 29 0;
#X connect 12 0 71 0;
#X connect 13 0 14 0;
#X connect 14 0 34 0;
#X connect 15 0 38 0;
#X connect 16 0 58 0;
#X connect 17 0 18 0;
#X connect 18 0 51 0;
#X connect 19 0 22 0;
#X connect 20 0 18 0;
#X connect 20 1 21 0;
#X connect 21 0 18 1;
#X connect 22 0 20 0;
#X connect 23 0 19 0;
#X connect 24 0 25 0;
#X connect 25 0 8 0;
#X connect 26 0 24 0;
#X connect 28 0 26 4;
#X connect 30 0 26 6;
#X connect 33 0 26 5;
#X connect 35 0 74 0;
#X connect 35 0 77 0;
#X connect 36 0 37 0;
#X connect 37 0 2 0;
#X connect 38 0 16 0;
#X connect 51 0 27 0;
#X connect 58 0 17 0;
#X connect 59 0 3 0;
#X connect 62 0 26 1;
#X connect 63 0 26 2;
#X connect 64 0 23 0;
#X connect 65 0 12 0;
#X connect 66 0 80 0;
#X connect 67 0 9 0;
#X connect 68 0 10 0;
#X connect 69 0 11 0;
#X connect 72 0 26 3;
#X connect 73 0 1 0;
#X connect 76 0 75 0;
#X connect 78 0 79 0;
#X connect 78 0 80 0;
#X connect 79 0 11 0;
#X connect 79 0 10 0;
#X connect 79 0 9 0;
#X connect 80 0 13 0;
#X connect 81 0 31 0;
